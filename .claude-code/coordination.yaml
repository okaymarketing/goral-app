coordination_protocols:

# Inter-system Communication
communication_channels:
  serena_to_subagents:
    protocol: "task_delegation"
    format: "structured_requirements"
    priority_levels: ["critical", "high", "medium", "low"]
    load_balancing: "intelligent_distribution"

  subagents_to_claude_code:
    protocol: "implementation_requests"
    format: "code_specifications"
    batch_processing: true
    fallback_strategy: "direct_subagent_execution"

  claude_code_to_ecosystem:
    protocol: "status_updates"
    format: "progress_reports"
    frequency: "real_time"
    health_monitoring: "continuous"

# Claude Code Specific Communication
claude_code_communication:
  health_status_reporting:
    frequency: "every_30_seconds"
    metrics: ["response_time", "task_completion", "error_rate"]
    escalation_thresholds: ["slow_response", "unresponsive", "error_prone"]

  task_distribution:
    healthy_mode: "100_percent_claude_code"
    degraded_mode: "smart_distribution"
    emergency_mode: "subagent_takeover"

# Conflict Resolution
conflict_resolution:
  decision_hierarchy:
    1: "claude_code_health_requirements"
    2: "serena_architect_role"
    3: "security_compliance_requirements"
    4: "business_requirements"
    5: "performance_standards"

  escalation_process:
    - level: "automatic_resolution"
      timeout: "5_minutes"
    - level: "serena_arbitration"
      timeout: "15_minutes"
    - level: "claude_code_supervisor_intervention"
      timeout: "30_minutes"
    - level: "human_intervention"
      timeout: "manual"

# Quality Gates
quality_gates:
  - gate: "claude_code_stability"
    validator: "claude_code_supervisor"
    blocker: true
    criteria: "responsive_and_performing"

  - gate: "security_compliance"
    validator: "security_subagent"
    blocker: true

  - gate: "test_coverage_90_percent"
    validator: "testing_subagent"
    blocker: true

  - gate: "architecture_compliance"
    validator: "serena_architect"
    blocker: true

  - gate: "performance_benchmarks"
    validator: "performance_engineer"
    blocker: true

  - gate: "ui_accessibility_compliance"
    validator: "ui_ux_subagent"
    blocker: false # Warning only

# Load Balancing Strategy
load_balancing:
  claude_code_healthy:
    distribution: "100_percent_claude_code"
    monitoring: "continuous"

  claude_code_slow:
    distribution: "70_percent_claude_code_30_percent_subagents"
    task_prioritization: "critical_tasks_to_claude_code"

  claude_code_struggling:
    distribution: "50_percent_each"
    task_breakdown: "smaller_chunks"

  claude_code_unresponsive:
    distribution: "100_percent_subagents"
    recovery_attempts: "background_recovery"

